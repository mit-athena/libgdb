#	Imakefile for the entire GDB Package
#
#	Noah Mendelsohn
#	Created: 8/24/87
#
#	$Source: /afs/dev.mit.edu/source/repository/athena/lib/gdb/Imakefile,v $
#	$Author: probe $
#	$Header: /afs/dev.mit.edu/source/repository/athena/lib/gdb/Imakefile,v 1.5 1990-11-21 09:53:23 probe Exp $

CFLAGS=	 "-O -DHESIOD"
LINTFLAGS= "-DHESIOD"
# These are pased to the subdirs
FLAGS=OCFLAGS=${CFLAGS}

#define ISUBDIRS lib
#define SUBDIRS lib include doc

all::	SUBDIRS


#if defined(vax) && !defined(ultrix)
# Ingres is installed, so also process the db directory...
all::	db

depend install::
	-(cd db; make $(MFLAGS) $@)
#endif



samps:: FRC
	(cd $@; make ${MFLAGS} OCFLAGS=${CFLAGS} all)

db::	lib
	(cd $@; make -k ${MFLAGS} OCFLAGS=${CFLAGS} all;echo "The make (above) for dbserv may blow up if Ingres is not installed.";echo "The rest of GDB should still build properly.")

FRC::

clean::
	-(cd db; make $(MFLAGS) clean)
	-(cd samps; make $(MFLAGS) clean)

lint:
	for i in SUBDIR; do \
	    (cd $$i; make ${MFLAGS} OLINTFLAGS=${LINTFLAGS} lint;cd ..); done
